import re

def handle_message(update, context):
    text = update.message.text.strip().lower()

    # ูุณุช ูพุงุณุฎโูุง ุจุฑ ุงุณุงุณ ุงูฺฏููุง ูุชู
    responses = [
        (r'ุณูุงู+', [
            "ุณูุงู ุจู ุฑู ูุงูุช ุนููุฌูู",
            "ุณูุงู ุณูุทุงู!! ุฎูุด ุงููุฏ",
            "ุณูุงู ู ุตุฏุชุง ุณูุงู ุนูู๐น ุฌูู ๐",
            "ุนูฺฉ ุณูุงู ุนูู ุฌููุ ุจุงุฏ ุขูุฏ ู ุจู ุนูุจุฑ ุขูุฑุฏ๐๐"
        ]),
        (r'ฺ\s?ุฎุจุฑ', ["ุฎุจุฑุง ฺฉู ูพุด ุดูุงุณุช ุนููุฌูู!"]),
        (r'ฺฉุณ ุขููุงู ูุณุช', ["ูู ุขููุงูู ุนููุฌูู ๐ ฺฉุงุฑ ุฏุงุดุชุ"]),
        (r'ุนูู\s?ุฌูู', [
            "ุฌุงู ุฏูู ุนููุ ุจฺฏู ุจุจูู ฺ ุดุฏู!",
            "ุฌุงูู ุนููุฌููุ ๐ ฺุฒ ูู ุฏุงุฑุ",
            "ุจูุฑูุงุฏ ุนููุฌููุ ู ูููู ฺฏุฑู ูุฎุตูุต ุดูุงโ๏ธ",
            "ุนููุฌูู ุจูุฑูุง ุจุดูุ ูููู ุชุงุฒู ู ุฏุงุบ ุจุง ฺฉฺฉ ุชุงุฒู ุจุฑุงุช ุจุงุฑู๐๐"
        ]),
        (r'\bุงุตู\b(?!.*ุงุตูุงุญ)', ["ุดูุง ูุงููุฑ ุซุจุช ุงุญูุงูุ ๐๐"]),
        (r'ุจุง ูพ[ _]?ู', ["ูพู ุฎุทุฑูุงฺฉู ุญุณู๐๐ฟ"]),
        (r'(ุฎุฏุงุญุงูุธ|ุฎุฏุงูฺฏูุฏุงุฑ|ุจุง)', [
            "ุฎุฏุงูฺฏูุฏุงุฑ ุณุชูู๐๐น",
            "ูุนูุง ููุงุธุจ ุฎูุฏุช ุจุงุด ุณูุทุงู โค"
        ]),
        (r'(ฺฏุดููู|ฺฏุฑุณููู)', ["ฺ ูู ุฏุงุฑ ุนููุฌููุ ๐"]),
        (r'ููู(?:)?\sฺฉุงูู', None),  # ุจุฑุง ููุงุด ููู ุฌุฏุงฺฏุงูู ููุฏู ูโฺฉูู
    ]

    # ฺฺฉ ฺฉุฑุฏู ูพุงุณุฎโูุง ุจุง regex
    for pattern, reply in responses:
        if re.search(pattern, text):
            if reply:
                update.message.reply_text(random.choice(reply))
            else:
                keywords = list(recipes.keys())
                update.message.reply_text("ฺฉููุงุช ฺฉูุฏ ููู ฺฉุงูู:\n- " + '\n- '.join(keywords))
            return

    # ฺฺฉ ฺฉุฑุฏู ุงุณู ููุดุฏูโูุง
    for item in recipes:
        if item in text:
            update.message.reply_text(recipes[item])
            return

    # ุฏุฑ ุตูุฑุช ุนุฏู ุชุทุงุจู ุจุง ูฺ ฺุฒ
    update.message.reply_text("ุนููุฌูู ุฏุฑุณุช ููููุฏู ฺ ฺฏูุชุ ู ฺุฒ ุฏฺฏู ุจฺฏู ุจุจูู!")
